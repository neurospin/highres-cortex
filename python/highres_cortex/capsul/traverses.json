{
    "type": "custom_pipeline",
    "name": "traverses",
    "definition": {
        "export_parameters": false,
        "doc": "Create cortical traverses\n\n      .. note::\n         There is a problem with the propagation of labels: the step size is\n         fixed, which means that sometimes the point can skip the corner of a\n         voxel, and thus go directly from a bulk voxel to an outside voxel. In\n         this case it is recorded as a \"dead-end\" advection path, no resulting\n         label is recorded and it appears as zero in the result.\n\n         This problem also appears in the previous \"exchange\" step, but is\n         mitigated by the subsequent connex component detection (each failed\n         propagation is assigned a different label).\n\n         Quick fix: fix the conjunction step to not aggregate zeros.\n\n         TODO: the proper way to fix this would be to force the advection path\n         to respect the boundaries of voxels, so that the corner of voxels\n         cannot be skipped over. This would also prevent the advection path\n         from crossing the thin CSF surface within the sulcus (comes from\n         skeleton).\n      \n      .. note::\n      \n          * Type 'ProcessMeta.help()' for a full description of this process parameters.\n          * Type '<ProcessMeta>.get_input_spec()' for a full description of this process input trait types.\n          * Type '<ProcessMeta>.get_output_spec()' for a full description of this process output trait types.\n      ",
        "executables": {
            "laplace": {
                "definition": "highres_cortex.capsul.processes.Laplacian",
                "type": "process"
            },
            "distmaps": {
                "definition": "highres_cortex.capsul.processes.Distmaps",
                "type": "process"
            },
            "sink1": {
                "definition": "highres_cortex.capsul.processes.VolumeSink",
                "type": "process"
            },
            "sink2": {
                "definition": "highres_cortex.capsul.processes.VolumeSink",
                "type": "process"
            },
            "threshold_CSF_interface": {
                "definition": "highres_cortex.capsul.processes.ImageSingleThreshold",
                "type": "process"
            },
            "threshold_white_interface": {
                "definition": "highres_cortex.capsul.processes.ImageSingleThreshold",
                "type": "process"
            },
            "label_CSF_interface": {
                "definition": "highres_cortex.capsul.processes.LabelEachVoxel",
                "type": "process"
            },
            "label_white_interface": {
                "definition": "highres_cortex.capsul.processes.LabelEachVoxel",
                "type": "process"
            },
            "negative_cortex": {
                "definition": "highres_cortex.capsul.processes.ImageSingleThreshold",
                "type": "process"
            },
            "negative_cortex_converter": {
                "definition": "highres_cortex.capsul.processes.ConvertDataType",
                "type": "process"
            },
            "CSF_negative_cortex_merger": {
                "definition": "highres_cortex.capsul.processes.MergeImagesSameValues",
                "type": "process"
            },
            "CSF_labelled_interface_merger": {
                "definition": "highres_cortex.capsul.processes.MergeImagesAllToOne",
                "type": "process"
            },
            "white_negative_cortex_merger": {
                "definition": "highres_cortex.capsul.processes.MergeImagesSameValues",
                "type": "process"
            },
            "white_labelled_interface_merger": {
                "definition": "highres_cortex.capsul.processes.MergeImagesAllToOne",
                "type": "process"
            },
            "CSF_to_white_propagation": {
                "definition": "highres_cortex.capsul.processes.PropagateAlongFieldGradient",
                "type": "process"
            },
            "white_to_CSF_propagation": {
                "definition": "highres_cortex.capsul.processes.PropagateAlongFieldGradient",
                "type": "process"
            },
            "get_exchanged_propvol": {
                "definition": "highres_cortex.capsul.processes.GetExchangedPropagationVolume",
                "type": "process"
            },
            "merge_exchanged_on_CSF": {
                "definition": "highres_cortex.capsul.processes.MergeImagesOneToOne",
                "type": "process"
            },
            "merge_exchanged_on_white": {
                "definition": "highres_cortex.capsul.processes.MergeImagesOneToOne",
                "type": "process"
            },
            "CSF_on_bulk_propagation": {
                "definition": "highres_cortex.capsul.processes.PropagateAlongFieldGradient",
                "type": "process"
            },
            "white_on_bulk_propagation": {
                "definition": "highres_cortex.capsul.processes.PropagateAlongFieldGradient",
                "type": "process"
            },
            "relabel_conjunction": {
                "definition": "highres_cortex.capsul.processes.RelabelConjunction",
                "type": "process"
            },
            "connected_conjunction": {
                "definition": "highres_cortex.capsul.processes.ConnectedComponents",
                "type": "process"
            },
            "merge_regions": {
                "definition": "highres_cortex.capsul.processes.MergeCortexColumnRegions",
                "type": "process"
            },
            "relabel": {
                "definition": "highres_cortex.capsul.processes.Relabel",
                "type": "process"
            },
            "randomize_labels": {
                "definition": "highres_cortex.capsul.processes.RandomizeLabels",
                "type": "process"
            }
        },
        "parameters": {
            "laplace.precision": 0.001,
            "laplace.typical_cortical_thickness": 3.0,
            "laplace.verbosity": 1,
            "threshold_CSF_interface.binary": true,
            "threshold_CSF_interface.fg": 32767,
            "threshold_CSF_interface.mode": "eq",
            "threshold_CSF_interface.threshold": 50.0,
            "threshold_white_interface.binary": true,
            "threshold_white_interface.fg": 32767,
            "threshold_white_interface.mode": "eq",
            "threshold_white_interface.threshold": 150.0,
            "label_CSF_interface.first_label": 100000001,
            "label_white_interface.first_label": 200000001,
            "negative_cortex.binary": true,
            "negative_cortex.fg": -1,
            "negative_cortex.mode": "di",
            "negative_cortex.threshold": 100.0,
            "negative_cortex_converter.data_type": "S32",
            "CSF_labelled_interface_merger.value": 200000000.0,
            "white_labelled_interface_merger.value": 100000000.0,
            "CSF_to_white_propagation.max_dist": 6.0,
            "CSF_to_white_propagation.step_size": 0.03,
            "CSF_to_white_propagation.target_label": 200000000,
            "CSF_to_white_propagation.upfield": true,
            "CSF_to_white_propagation.verbosity": 1,
            "white_to_CSF_propagation.max_dist": 6.0,
            "white_to_CSF_propagation.step_size": 0.03,
            "white_to_CSF_propagation.target_label": 100000000,
            "white_to_CSF_propagation.upfield": false,
            "white_to_CSF_propagation.verbosity": 1,
            "merge_exchanged_on_CSF.label": 150,
            "merge_exchanged_on_CSF.value": 0.0,
            "merge_exchanged_on_white.label": 50,
            "merge_exchanged_on_white.value": 0.0,
            "CSF_on_bulk_propagation.max_dist": 6.0,
            "CSF_on_bulk_propagation.step_size": 0.03,
            "CSF_on_bulk_propagation.target_label": 0,
            "CSF_on_bulk_propagation.upfield": true,
            "CSF_on_bulk_propagation.verbosity": 1,
            "white_on_bulk_propagation.max_dist": 6.0,
            "white_on_bulk_propagation.step_size": 0.03,
            "white_on_bulk_propagation.target_label": 0,
            "white_on_bulk_propagation.upfield": false,
            "white_on_bulk_propagation.verbosity": 1,
            "connected_conjunction.connectivity": "26",
            "merge_regions.goal_diameter": 0.5,
            "merge_regions.verbosity": 1
        },
        "plugs_state": {
            "threshold_CSF_interface.mode": {
                "optional": true
            },
            "threshold_CSF_interface.threshold": {
                "optional": true
            },
            "threshold_white_interface.mode": {
                "optional": true
            },
            "threshold_white_interface.threshold": {
                "optional": true
            },
            "negative_cortex.mode": {
                "optional": true
            },
            "negative_cortex.threshold": {
                "optional": true
            },
            "negative_cortex_converter.data_type": {
                "optional": true
            },
            "CSF_labelled_interface_merger.value": {
                "optional": true
            },
            "white_labelled_interface_merger.value": {
                "optional": true
            },
            "CSF_to_white_propagation.upfield": {
                "optional": true
            },
            "white_to_CSF_propagation.upfield": {
                "optional": true
            },
            "merge_exchanged_on_CSF.label": {
                "optional": true
            },
            "merge_exchanged_on_CSF.value": {
                "optional": true
            },
            "merge_exchanged_on_white.label": {
                "optional": true
            },
            "merge_exchanged_on_white.value": {
                "optional": true
            },
            "CSF_on_bulk_propagation.upfield": {
                "optional": true
            },
            "white_on_bulk_propagation.upfield": {
                "optional": true
            }
        },
        "links": [
            "classif->negative_cortex.input_image",
            "classif->merge_regions.classif",
            "classif->laplace.classif",
            "classif->distmaps.classif",
            "verbosity->white_to_CSF_propagation.verbosity",
            "verbosity->CSF_to_white_propagation.verbosity",
            "verbosity->merge_regions.verbosity",
            "verbosity->white_on_bulk_propagation.verbosity",
            "verbosity->laplace.verbosity",
            "verbosity->CSF_on_bulk_propagation.verbosity",
            "laplace_precision->laplace.precision",
            "laplace_typical_cortical_thickness->laplace.typical_cortical_thickness",
            "advection_step_size->CSF_on_bulk_propagation.step_size",
            "advection_step_size->white_on_bulk_propagation.step_size",
            "advection_step_size->CSF_to_white_propagation.step_size",
            "advection_step_size->white_to_CSF_propagation.step_size",
            "goal_traverse_diameter->merge_regions.goal_diameter",
            "laplace.laplace_field->white_to_CSF_propagation.grad_field",
            "laplace.laplace_field->CSF_on_bulk_propagation.grad_field",
            "laplace.laplace_field->white_on_bulk_propagation.grad_field",
            "laplace.laplace_field->CSF_to_white_propagation.grad_field",
            "distmaps.classif_with_outer_boundaries->merge_exchanged_on_CSF.mask_image",
            "distmaps.classif_with_outer_boundaries->get_exchanged_propvol.classif_with_outer_boundaries",
            "distmaps.classif_with_outer_boundaries->threshold_white_interface.input_image",
            "distmaps.classif_with_outer_boundaries->threshold_CSF_interface.input_image",
            "distmaps.classif_with_outer_boundaries->merge_exchanged_on_white.mask_image",
            "distmaps.distCSF->sink2.file",
            "distmaps.distwhite->sink1.file",
            "threshold_CSF_interface.output_image->label_CSF_interface.input_image",
            "threshold_white_interface.output_image->label_white_interface.input_image",
            "label_CSF_interface.output_image->CSF_negative_cortex_merger.mask_image",
            "label_CSF_interface.output_image->white_labelled_interface_merger.mask_image",
            "label_white_interface.output_image->CSF_labelled_interface_merger.mask_image",
            "label_white_interface.output_image->white_negative_cortex_merger.mask_image",
            "negative_cortex.output_image->negative_cortex_converter.input_image",
            "negative_cortex_converter.output_image->white_negative_cortex_merger.input_image",
            "negative_cortex_converter.output_image->CSF_negative_cortex_merger.input_image",
            "CSF_negative_cortex_merger.output_image->CSF_labelled_interface_merger.input_image",
            "CSF_labelled_interface_merger.output_image->CSF_to_white_propagation.seeds",
            "white_negative_cortex_merger.output_image->white_labelled_interface_merger.input_image",
            "white_labelled_interface_merger.output_image->white_to_CSF_propagation.seeds",
            "CSF_to_white_propagation.output_labels->get_exchanged_propvol.CSF_labels_on_white",
            "white_to_CSF_propagation.output_labels->get_exchanged_propvol.white_labels_on_CSF",
            "get_exchanged_propvol.output->merge_exchanged_on_CSF.input_image",
            "get_exchanged_propvol.output->merge_exchanged_on_white.input_image",
            "merge_exchanged_on_CSF.output_image->CSF_on_bulk_propagation.seeds",
            "merge_exchanged_on_white.output_image->white_on_bulk_propagation.seeds",
            "CSF_on_bulk_propagation.dest_points->merge_regions.proj_csf",
            "CSF_on_bulk_propagation.output_labels->relabel_conjunction.labels1",
            "white_on_bulk_propagation.dest_points->merge_regions.proj_white",
            "white_on_bulk_propagation.output_labels->relabel_conjunction.labels2",
            "relabel_conjunction.output->connected_conjunction.input_image",
            "connected_conjunction.output->merge_regions.input_traverses",
            "merge_regions.output->relabel.input",
            "relabel.output->randomize_labels.input",
            "randomize_labels.output->cortical_traverses"
        ],
        "gui": {
            "position": {
                "threshold_white_interface": [
                    464.0,
                    189.0
                ],
                "sink2": [
                    327.0,
                    127.0
                ],
                "sink1": [
                    327.0,
                    188.0
                ],
                "relabel": [
                    3053.0,
                    633.0
                ],
                "negative_cortex": [
                    371.0,
                    453.0
                ],
                "CSF_negative_cortex_merger": [
                    1036.0,
                    62.0
                ],
                "CSF_labelled_interface_merger": [
                    1383.0,
                    41.0
                ],
                "white_to_CSF_propagation": [
                    1754.0,
                    249.0
                ],
                "merge_exchanged_on_CSF": [
                    2345.0,
                    -36.0
                ],
                "label_white_interface": [
                    743.0,
                    212.0
                ],
                "white_negative_cortex_merger": [
                    1038.0,
                    205.0
                ],
                "get_exchanged_propvol": [
                    2043.0,
                    158.0
                ],
                "CSF_to_white_propagation": [
                    1756.0,
                    -39.0
                ],
                "threshold_CSF_interface": [
                    463.0,
                    -18.0
                ],
                "distmaps": [
                    89.0,
                    42.0
                ],
                "inputs": [
                    0.0,
                    211.0
                ],
                "outputs": [
                    3337.0,
                    595.0
                ],
                "merge_exchanged_on_white": [
                    2341.0,
                    191.0
                ],
                "merge_regions": [
                    2904.0,
                    524.0
                ],
                "white_on_bulk_propagation": [
                    2626.0,
                    254.0
                ],
                "white_labelled_interface_merger": [
                    1386.0,
                    203.0
                ],
                "relabel_conjunction": [
                    2896.0,
                    239.0
                ],
                "label_CSF_interface": [
                    745.0,
                    51.0
                ],
                "connected_conjunction": [
                    3101.0,
                    250.0
                ],
                "randomize_labels": [
                    3169.0,
                    606.0
                ],
                "CSF_on_bulk_propagation": [
                    2628.0,
                    -32.0
                ],
                "negative_cortex_converter": [
                    596.0,
                    517.0
                ],
                "laplace": [
                    1378.0,
                    557.0
                ]
            }
        }
    }
}